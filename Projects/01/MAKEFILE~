# Dylan Zingler
# Project 01 CMSC 417 NETWORKING
# Credit given to Yanick Rochon
# project name (generate executable with this name)
TARGET   = p1

CC       = gcc -c
# compiling flags here
CFLAGS   = -std=c99 -Wall -I.

LINKER   = gcc -o
# linking flags here
LFLAGS   = -std=c99 -Wall

SOURCES  := $(wildcard *.c)
#INCLUDES := $(wildcard *.h)
OBJECTS  := $(SOURCES:.c=*.o)
EDITED_FILES  := $(wildcard *~)
TESTS := $(wildcard test*.sh)
rm       = rm -rf

$(TARGET): obj
	$(LINKER) $(TARGET) $(LFLAGS) $(OBJECTS)
	echo "Linking complete!"

# OLD obj
#obj: $(SOURCES) $(INCLUDES)
#	$(CC) $(CFLAGS) $(SOURCES)
#	echo "Compilation complete!"

obj: $(SOURCES) 
	$(CC) $(CFLAGS) $(SOURCES) 
	echo "Compilation complete!"

test:
	./tests/test1.sh
	

zip:
	zip p1.zip ./tests.sh $(SOURCES) ./MAKEFILE

clean:
	@$(rm) $(TARGET) $(OBJECTS) $(EDITED_FILES)	
	@echo "Cleanup complete!"
